<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://filecdn.runoneall.nyc.mn/BlogResource/favicon-apple.webp"><link rel="icon" href="https://filecdn.runoneall.nyc.mn/BlogResource/favicon.webp"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Runoneall"><meta name="keywords" content=""><meta name="description" content="本教程提供的文件有可能不是最新的, 并且有可能过时, 请注意甄别 本教程参考 小米路由器3G R3G 刷入Breed和OpenWrt 20.02.2 的记录, 小米路由器 3G 使用 OpenWRT, 小米R3G的USB挂载问题  准备 R3G路由器 电脑, 安装 python3 环境 安装了 requests 依赖包 全程使用有线连接 (!!! 不要用无线 !!!) VPN (也许?) !!!"><meta property="og:type" content="article"><meta property="og:title" content="MiWiFi 3G(R3G) 一站式刷机"><meta property="og:url" content="https://runoneall.github.io/article/MiWiFi-3G-R3G-%E4%B8%80%E7%AB%99%E5%BC%8F%E5%88%B7%E6%9C%BA.html"><meta property="og:site_name" content="Runoneall の 小破站"><meta property="og:description" content="本教程提供的文件有可能不是最新的, 并且有可能过时, 请注意甄别 本教程参考 小米路由器3G R3G 刷入Breed和OpenWrt 20.02.2 的记录, 小米路由器 3G 使用 OpenWRT, 小米R3G的USB挂载问题  准备 R3G路由器 电脑, 安装 python3 环境 安装了 requests 依赖包 全程使用有线连接 (!!! 不要用无线 !!!) VPN (也许?) !!!"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-09-04T03:20:19.000Z"><meta property="article:modified_time" content="2024-10-15T13:01:37.560Z"><meta property="article:author" content="Runoneall"><meta name="twitter:card" content="summary_large_image"><title>MiWiFi 3G(R3G) 一站式刷机 | Runoneall の 小破站</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"runoneall.github.io",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:70,cursorChar:"|",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Runoneall の 小破站" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Runoneall&#39;s Blog</strong></a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item"><a class="nav-link" href="/atom.xml" target="_self"><i class="iconfont icon-rss"></i> <span>RSS</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://filecdn.runoneall.nyc.mn/BlogResource/banner.webp) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="MiWiFi 3G(R3G) 一站式刷机"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-09-04 11:20" pubdate>2024年9月4日 上午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 767 字</span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 7 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">MiWiFi 3G(R3G) 一站式刷机</h1><div class="markdown-body"><ul><li>本教程提供的文件有可能不是最新的, 并且有可能过时, 请注意甄别</li><li>本教程参考 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/milton/p/16163521.html">小米路由器3G R3G 刷入Breed和OpenWrt 20.02.2 的记录</a>, <a target="_blank" rel="noopener" href="https://www.ohyee.cc/post/note_miwifi_openwrt">小米路由器 3G 使用 OpenWRT</a>, <a target="_blank" rel="noopener" href="https://www.right.com.cn/FORUM/thread-836975-1-1.html">小米R3G的USB挂载问题</a></li></ul><h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><ul><li>R3G路由器</li><li>电脑, 安装 <code>python3</code> 环境</li><li>安装了 <code>requests</code> 依赖包</li><li>全程使用有线连接 (!!! 不要用无线 !!!)</li><li>VPN (也许?)</li><li>!!! 眼睛与脑子 !!!</li></ul><h1 id="解锁并获取权限"><a href="#解锁并获取权限" class="headerlink" title="解锁并获取权限"></a>解锁并获取权限</h1><ol><li>下载开发版系统 <a target="_blank" rel="noopener" href="https://bigota.miwifi.com/xiaoqiang/rom/r3g/miwifi_r3g_firmware_12f97_2.25.124.bin">下载地址</a></li><li>进入到路由器管理, 选择 <code>系统升级</code> - <code>本地升级</code> - <code>上传固件</code>, 选择下载的文件, 等待路由器更新重启完成</li><li>登入到路由器后台, 查看是否为开发版系统, 如果是, 进行下一步, 否则重来或寻找其他方法</li><li>下载解锁工具 <a target="_blank" rel="noopener" href="https://github.com/acecilia/OpenWRTInvasion/archive/refs/tags/0.0.8.zip">下载地址</a></li><li>解压并进入, 运行 <code>pip3 install -r requirements.txt &amp;&amp; python3 remote_command_execution_vulnerability.py</code> 并填入信息, 等待一段时间后解锁成功, 然后保存 <code>FTP</code> 和 <code>SSH 或 Telnet</code> 的访问信息 (用户名 <code>root</code> 密码 <code>root</code> )</li></ol><h1 id="刷入不死Breed"><a href="#刷入不死Breed" class="headerlink" title="刷入不死Breed"></a>刷入不死Breed</h1><ol><li>使用SSH或Telnet登入到路由器 (以下简称 <code>登入到路由器</code> )</li><li>使用 <code>cat /proc/mtd</code> 查看闪存布局</li><li>使用 <code>dd if=/dev/mtd4 of=/tmp/eeprom.bin</code> 备份 <code>eeprom</code></li><li>使用FTP登入到路由器, 进入 <code>/tmp</code> 目录, 把 <code>eeprom.bin</code> 下载到本地存储</li><li>下载Breed <a target="_blank" rel="noopener" href="https://breed.hackpascal.net/breed-mt7621-xiaomi-r3g.bin">下载地址</a> 并上传到路由器 <code>/tmp</code> 目录</li><li>登入到路由器, 使用 <code>cd /tmp</code> 进入到目录, 使用 <code>mtd -r write /tmp/breed-R3G.bin Bootloader</code> 刷入Breed, 完成后路由器会自动重启, 等待重启完成</li></ol><h1 id="刷入OpenWrt"><a href="#刷入OpenWrt" class="headerlink" title="刷入OpenWrt"></a>刷入OpenWrt</h1><ol><li>断开路由器电源, 按住 <code>Reset</code> 并重新接入电源, 当网口灯闪烁3次后浏览器输入 <code>192.168.1.1</code> 进入Breed管理面板</li><li>点击 <code>Mac地址修改</code> 查看是否全为 <code>FF</code>, 如果是, 点击固件更新, 在 <code>eeprom</code> 处上传备份的 <code>eeprom</code> 文件</li><li>下载OpenWrt固件 <a href="https://firmware-selector.openwrt.org/?version=23.05.4&target=ramips/mt7621&id=xiaomi_mi-router-3g">下载地址</a>, 进入后找到版本选择, 点击 <code>非SNAPSHOT</code> 的最新版本, 下载 <code>KERNEL1</code> 和 <code>ROOTFS0</code></li><li>进入Breed, 点击环境变量, 删除 <code>normal_firmware_md5</code></li><li>进入Breed, 选择固件更新, 在下拉框中选择 <code>Openwrt</code> , 按照提示上传 <code>KERNEL1</code> 和 <code>ROOTFS0</code> 文件, 点击自动重启, 稍等片刻即可安装完成</li></ol><h1 id="汉化"><a href="#汉化" class="headerlink" title="汉化"></a>汉化</h1><ol><li>进入 <code>System</code> - <code>Software</code></li><li>点击 <code>Update lists</code> 等待完成 (可能较慢, 如有动手能力可以点击 <code>Configure opkg</code> 自行换源)</li><li>在 <code>Filter</code> 处输入 <code>luci-i18n-base-zh-cn</code> 并等待安装完成</li><li>刷新页面</li></ol><h1 id="识别USB存储设备"><a href="#识别USB存储设备" class="headerlink" title="识别USB存储设备"></a>识别USB存储设备</h1><ol><li>登入到路由器</li><li>先运行 <code>opkg install kmod-nls-cp437 kmod-nls-iso8859-1 kmod-usb-core kmod-usb-ohci kmod-usb-storage kmod-usb2 mount-utils</code><ul><li>当你的盘为fat格式时运行 <code>opkg install kmod-fs-vfat</code></li><li>当你的盘为ext3格式时运行 <code>opkg install kmod-fs-ext3</code></li><li>当你的盘为ntfs格式时运行 <code>opkg install ntfs-3g</code></li><li>当你的盘为ext4格式时运行 <code>opkg install kmod-fs-ext4</code></li></ul></li><li>挂载<ul><li>一般为 <code>/dev/sda1</code></li><li>列出所有可用设备 <code>ls /dev | grep sda</code></li><li>使用 <code>mount /dev/sda1 /mnt</code> 将设备挂载到 <code>/mnt</code> 目录</li><li>使用 <code>cd /mnt</code> 进入到设备</li><li>使用 <code>umount /mnt</code> 取消挂载 (!!! 拔出设备前一定要做 !!!)</li><li>路由器重启后需要重新挂载</li></ul></li><li>当挂载设备耗电较大 (如硬盘盒外接硬盘) 时, 建议使用外接供电, 否则路由器容易供电不足</li></ol></div><hr><div><div class="post-metas my-3"></div><div class="license-box my-3"><div class="license-title"><div>MiWiFi 3G(R3G) 一站式刷机</div><div>https://runoneall.github.io/article/MiWiFi-3G-R3G-一站式刷机.html</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Runoneall</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年9月4日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/article/%E5%8D%9A%E5%AE%A2%E9%95%9C%E5%83%8F%E7%AB%99%E5%AE%8C%E6%88%90.html" title="博客镜像站完成"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">博客镜像站完成</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/article/%E8%87%AA%E5%BB%BAdoh%E6%9C%8D%E5%8A%A1%E5%99%A8-%E8%AE%BE%E7%BD%AEFirefox%E4%BD%BF%E7%94%A8.html" title="自建doh服务器+设置Firefox使用"><span class="hidden-mobile">自建doh服务器+设置Firefox使用</span> <span class="visible-mobile">下一篇</span><i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a><i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,i=t.getElementById("subtitle");i&&e&&e(i.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}})))}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>